{"ast":null,"code":"import React,{useContext,useRef,useEffect,useState}from'react';import{Link,useNavigate}from'react-router-dom';import{UserContext}from'../App';import M from'materialize-css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NavBar=()=>{const searchModal=useRef(null);const[search,setSearch]=useState('');const[userDetails,setUserDetails]=useState([]);const{state,dispatch}=useContext(UserContext);const navigate=useNavigate();useEffect(()=>{M.Modal.init(searchModal.current);},[]);const renderList=()=>{if(state){return[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"i\",{\"data-target\":\"modal1\",className:\"large material-icons modal-trigger\",style:{color:'black'},children:\"search\"})},\"1\"),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/profile\",children:\"Profile\"})},\"2\"),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/create\",children:\"Create Post\"})},\"3\"),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/myfollowingpost\",children:\"My Following Posts\"})},\"4\"),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn #c62828 red darken-3\",onClick:()=>{localStorage.clear();dispatch({type:'CLEAR'});navigate('/signin');// Correct navigation\n},children:\"Logout\"})},\"5\")];}else{return[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/signin\",children:\"Signin\"})},\"6\"),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Signup\"})},\"7\")];}};const fetchUsers=query=>{setSearch(query);fetch('/search-users',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({query})}).then(res=>res.json()).then(results=>{setUserDetails(results.user);}).catch(err=>console.error(err));};return/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"nav-wrapper white\",children:[/*#__PURE__*/_jsx(Link,{to:state?'/':'/signin',className:\"brand-logo left\",children:\"Instagram\"}),/*#__PURE__*/_jsx(\"ul\",{id:\"nav-mobile\",className:\"right\",children:renderList()})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"modal1\",className:\"modal\",ref:searchModal,style:{color:'black'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search users\",value:search,onChange:e=>fetchUsers(e.target.value)}),/*#__PURE__*/_jsx(\"ul\",{className:\"collection\",children:userDetails.map(item=>/*#__PURE__*/_jsx(Link,{to:item._id!==(state===null||state===void 0?void 0:state._id)?`/profile/${item._id}`:'/profile',onClick:()=>{M.Modal.getInstance(searchModal.current).close();setSearch('');},children:/*#__PURE__*/_jsx(\"li\",{className:\"collection-item\",children:item.email})},item._id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-footer\",children:/*#__PURE__*/_jsx(\"button\",{className:\"modal-close waves-effect waves-green btn-flat\",onClick:()=>setSearch(''),children:\"Close\"})})]})]});};export default NavBar;","map":{"version":3,"names":["React","useContext","useRef","useEffect","useState","Link","useNavigate","UserContext","M","jsx","_jsx","jsxs","_jsxs","NavBar","searchModal","search","setSearch","userDetails","setUserDetails","state","dispatch","navigate","Modal","init","current","renderList","children","className","style","color","to","onClick","localStorage","clear","type","fetchUsers","query","fetch","method","headers","body","JSON","stringify","then","res","json","results","user","catch","err","console","error","id","ref","placeholder","value","onChange","e","target","map","item","_id","getInstance","close","email"],"sources":["C:/Users/kovia/Desktop/clone insta 2/insta-clone/client/src/components/Navbar.js"],"sourcesContent":["import React, { useContext, useRef, useEffect, useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { UserContext } from '../App';\r\nimport M from 'materialize-css';\r\n\r\nconst NavBar = () => {\r\n    const searchModal = useRef(null);\r\n    const [search, setSearch] = useState('');\r\n    const [userDetails, setUserDetails] = useState([]);\r\n    const { state, dispatch } = useContext(UserContext);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        M.Modal.init(searchModal.current);\r\n    }, []);\r\n\r\n    const renderList = () => {\r\n        if (state) {\r\n            return [\r\n                <li key=\"1\">\r\n                    <i\r\n                        data-target=\"modal1\"\r\n                        className=\"large material-icons modal-trigger\"\r\n                        style={{ color: 'black' }}\r\n                    >\r\n                        search\r\n                    </i>\r\n                </li>,\r\n                <li key=\"2\"><Link to=\"/profile\">Profile</Link></li>,\r\n                <li key=\"3\"><Link to=\"/create\">Create Post</Link></li>,\r\n                <li key=\"4\"><Link to=\"/myfollowingpost\">My Following Posts</Link></li>,\r\n                <li key=\"5\">\r\n                    <button\r\n                        className=\"btn #c62828 red darken-3\"\r\n                        onClick={() => {\r\n                            localStorage.clear();\r\n                            dispatch({ type: 'CLEAR' });\r\n                            navigate('/signin'); // Correct navigation\r\n                        }}\r\n                    >\r\n                        Logout\r\n                    </button>\r\n                </li>\r\n            ];\r\n        } else {\r\n            return [\r\n                <li key=\"6\"><Link to=\"/signin\">Signin</Link></li>,\r\n                <li key=\"7\"><Link to=\"/signup\">Signup</Link></li>\r\n            ];\r\n        }\r\n    };\r\n\r\n    const fetchUsers = (query) => {\r\n        setSearch(query);\r\n        fetch('/search-users', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ query }),\r\n        })\r\n            .then((res) => res.json())\r\n            .then((results) => {\r\n                setUserDetails(results.user);\r\n            })\r\n            .catch((err) => console.error(err));\r\n    };\r\n\r\n    return (\r\n        <nav>\r\n            <div className=\"nav-wrapper white\">\r\n                <Link to={state ? '/' : '/signin'} className=\"brand-logo left\">\r\n                    Instagram\r\n                </Link>\r\n                <ul id=\"nav-mobile\" className=\"right\">\r\n                    {renderList()}\r\n                </ul>\r\n            </div>\r\n\r\n            {/* Search Modal */}\r\n            <div id=\"modal1\" className=\"modal\" ref={searchModal} style={{ color: 'black' }}>\r\n                <div className=\"modal-content\">\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Search users\"\r\n                        value={search}\r\n                        onChange={(e) => fetchUsers(e.target.value)}\r\n                    />\r\n                    <ul className=\"collection\">\r\n                        {userDetails.map((item) => (\r\n                            <Link\r\n                                to={item._id !== state?._id ? `/profile/${item._id}` : '/profile'}\r\n                                onClick={() => {\r\n                                    M.Modal.getInstance(searchModal.current).close();\r\n                                    setSearch('');\r\n                                }}\r\n                                key={item._id}\r\n                            >\r\n                                <li className=\"collection-item\">{item.email}</li>\r\n                            </Link>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n                <div className=\"modal-footer\">\r\n                    <button\r\n                        className=\"modal-close waves-effect waves-green btn-flat\"\r\n                        onClick={() => setSearch('')}\r\n                    >\r\n                        Close\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </nav>\r\n    );\r\n};\r\n\r\nexport default NavBar;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}