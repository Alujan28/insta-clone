{"ast":null,"code":"import React,{useState,useContext}from'react';import{Link,useNavigate}from'react-router-dom';import{UserContext}from'../../App';import M from'materialize-css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SignIn=()=>{const{dispatch}=useContext(UserContext);const navigate=useNavigate();const[password,setPassword]=useState('');const[email,setEmail]=useState('');const PostData=()=>{const emailRegex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;if(!emailRegex.test(email)){M.toast({html:'Invalid email',classes:'#c62828 red darken-3'});return;}fetch('/signin',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})}).then(res=>res.json()).then(data=>{if(data.error){M.toast({html:data.error,classes:'#c62828 red darken-3'});}else{localStorage.setItem('jwt',data.token);localStorage.setItem('user',JSON.stringify(data.user));dispatch({type:'USER',payload:data.user});M.toast({html:'Signed in successfully',classes:'#43a047 green darken-1'});navigate('/');}}).catch(err=>console.error(err));};return/*#__PURE__*/_jsx(\"div\",{className:\"mycard\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card auth-card input-field\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Instagram\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"btn waves-effect waves-light #64b5f6 blue darken-1\",onClick:PostData,children:\"Login\"}),/*#__PURE__*/_jsx(\"h5\",{children:/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Don't have an account?\"})}),/*#__PURE__*/_jsx(\"h6\",{children:/*#__PURE__*/_jsx(Link,{to:\"/reset\",children:\"Forgot password?\"})})]})});};export default SignIn;","map":{"version":3,"names":["React","useState","useContext","Link","useNavigate","UserContext","M","jsx","_jsx","jsxs","_jsxs","SignIn","dispatch","navigate","password","setPassword","email","setEmail","PostData","emailRegex","test","toast","html","classes","fetch","method","headers","body","JSON","stringify","then","res","json","data","error","localStorage","setItem","token","user","type","payload","catch","err","console","className","children","placeholder","value","onChange","e","target","onClick","to"],"sources":["C:/Users/kovia/Desktop/clone insta 2/insta-clone/client/src/components/screens/SignIn.js"],"sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { UserContext } from '../../App';\r\nimport M from 'materialize-css';\r\n\r\nconst SignIn = () => {\r\n    const { dispatch } = useContext(UserContext);\r\n    const navigate = useNavigate();\r\n    const [password, setPassword] = useState('');\r\n    const [email, setEmail] = useState('');\r\n\r\n    const PostData = () => {\r\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n\r\n        if (!emailRegex.test(email)) {\r\n            M.toast({ html: 'Invalid email', classes: '#c62828 red darken-3' });\r\n            return;\r\n        }\r\n\r\n        fetch('/signin', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ email, password }),\r\n        })\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n                if (data.error) {\r\n                    M.toast({ html: data.error, classes: '#c62828 red darken-3' });\r\n                } else {\r\n                    localStorage.setItem('jwt', data.token);\r\n                    localStorage.setItem('user', JSON.stringify(data.user));\r\n                    dispatch({ type: 'USER', payload: data.user });\r\n                    M.toast({\r\n                        html: 'Signed in successfully',\r\n                        classes: '#43a047 green darken-1',\r\n                    });\r\n                    navigate('/');\r\n                }\r\n            })\r\n            .catch((err) => console.error(err));\r\n    };\r\n\r\n    return (\r\n        <div className=\"mycard\">\r\n            <div className=\"card auth-card input-field\">\r\n                <h2>Instagram</h2>\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Email\"\r\n                    value={email}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                />\r\n                <input\r\n                    type=\"password\"\r\n                    placeholder=\"Password\"\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                />\r\n                <button\r\n                    className=\"btn waves-effect waves-light #64b5f6 blue darken-1\"\r\n                    onClick={PostData}\r\n                >\r\n                    Login\r\n                </button>\r\n                <h5>\r\n                    <Link to=\"/signup\">Don't have an account?</Link>\r\n                </h5>\r\n                <h6>\r\n                    <Link to=\"/reset\">Forgot password?</Link>\r\n                </h6>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SignIn;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}